<!-- Load the fonts used in the design system -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet" />

<!-- Load Geist fonts directly -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/geist-font@latest/dist/geist-sans/style.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/geist-font@latest/dist/geist-mono/style.css">

<style>
  /* Define font variables to match the app */
  :root {
    --font-geist-sans: 'Geist Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    --font-geist-mono: 'Geist Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    --font-outfit: 'Outfit', sans-serif;
    --theme-transition-duration: 200ms;
  }

  /* Apply base styles */
  body {
    margin: 0;
    background-color: var(--background);
    color: var(--foreground);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Theme transition styles */
  :root,
  :root * {
    transition: background-color var(--theme-transition-duration) ease-out,
      border-color var(--theme-transition-duration) ease-out,
      color var(--theme-transition-duration) ease-out,
      fill var(--theme-transition-duration) ease-out,
      stroke var(--theme-transition-duration) ease-out !important;
  }

  /* Force Storybook to use our theme colors */
  .sb-show-main,
  #storybook-root,
  .sb-show-main.sb-main-padded {
    background-color: var(--background) !important;
    color: var(--foreground) !important;
    padding: 0 !important;
    margin: 0 !important;
    min-height: 100vh;
  }

  /* Ensure consistent theme colors in the Storybook UI */
  .sidebar-container,
  .search-field,
  .search-field input,
  .search-result-item,
  .search-result-recentlyOpened {
    transition: background-color var(--theme-transition-duration) ease-out,
      color var(--theme-transition-duration) ease-out,
      border-color var(--theme-transition-duration) ease-out !important;
  }
</style>

<script>
  // Initialize theme as soon as possible
  (function () {
    const defaultTheme = 'cool';
    const storedTheme = localStorage.getItem('storybook-theme');
    const theme = storedTheme || defaultTheme;

    // Set initial data-theme
    document.documentElement.setAttribute('data-theme', theme);

    // Force immediate visibility
    document.documentElement.classList.add('sb-show-main');
  })();
</script>